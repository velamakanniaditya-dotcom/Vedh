<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Word Wizard ğŸª„ - Worksheet Edition</title>
<link href="https://fonts.googleapis.com/css2?family=Fredoka+One&family=Nunito:wght@600;800;900&display=swap" rel="stylesheet">
<style>
/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   WORKSHEET THEME - LITERACY
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
:root {
  --primary: #a855f7; /* Magical Purple */
  --secondary: #ec4899; /* Bright Pink */
  --danger: #fb7185; /* Soft Red */
  --warning: #fbbf24; /* Warm Yellow */
  --dark: #334155;
  --paper: #ffffff;
  --lines: #e2e8f0;
  --margin-line: #fca5a5;
}

* { margin:0; padding:0; box-sizing:border-box; }

body {
  font-family: 'Nunito', sans-serif;
  /* Lined Paper Background */
  background-color: #f8fafc;
  background-image: 
    linear-gradient(var(--lines) 2px, transparent 2px),
    linear-gradient(90deg, transparent 40px, var(--margin-line) 40px, var(--margin-line) 43px, transparent 43px);
  background-size: 100% 40px, 100% 100%;
  background-position: 0 38px, 0 0;
  color: var(--dark);
  min-height: 100vh;
  display: flex; flex-direction: column; align-items: center;
  padding: 20px;
}

/* Floating Home Button */
.home-btn {
  position: absolute; top: 20px; left: 20px;
  background: white; border: 3px solid var(--primary);
  color: var(--primary); padding: 8px 16px;
  border-radius: 50px; text-decoration: none;
  font-family: 'Fredoka One', cursive; font-size: 1.1rem;
  box-shadow: 0 4px 0 var(--primary);
  transition: all 0.1s; z-index: 100;
}
.home-btn:active { transform: translateY(4px); box-shadow: 0 0 0 var(--primary); }

/* Header */
header { text-align: center; margin-top: 40px; margin-bottom: 20px; }
h1 { font-family: 'Fredoka One', cursive; font-size: 3.5rem; color: var(--primary); text-shadow: 2px 2px 0 #fff, 4px 4px 0 rgba(0,0,0,0.1); line-height: 1; }
.subtitle { font-size: 1.2rem; font-weight: 800; color: #64748b; margin-top: 5px; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SCREENS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.screen { display: none; width: 100%; max-width: 500px; animation: popIn 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
.screen.active { display: block; }
@keyframes popIn { 0% { opacity: 0; transform: scale(0.9) translateY(20px); } 100% { opacity: 1; transform: scale(1) translateY(0); } }

/* Cards / Containers */
.worksheet-card {
  background: var(--paper);
  border: 4px solid var(--dark);
  border-radius: 24px;
  padding: 30px;
  box-shadow: 0 10px 0 rgba(51, 65, 85, 0.1);
  text-align: center;
  position: relative;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   START SCREEN (MODE SELECTION)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.mode-btn {
  width: 100%; display: flex; align-items: center; gap: 15px;
  background: white; border: 4px solid var(--dark);
  border-radius: 20px; padding: 15px 20px; margin-bottom: 15px;
  cursor: pointer; text-align: left; transition: all 0.1s;
  box-shadow: 0 6px 0 var(--dark);
}
.mode-btn:active { transform: translateY(6px); box-shadow: 0 0 0 var(--dark); }
.mode-btn.relaxed { border-color: var(--secondary); box-shadow: 0 6px 0 var(--secondary); }
.mode-btn.blast { border-color: var(--warning); box-shadow: 0 6px 0 var(--warning); }

.mode-icon { font-size: 2.5rem; }
.mode-text h3 { font-family: 'Fredoka One', cursive; font-size: 1.4rem; margin-bottom: 3px; color: var(--dark); }
.mode-text p { font-size: 0.95rem; font-weight: 600; color: #64748b; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   GAME SCREEN
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.top-bar { display: flex; justify-content: space-between; font-family: 'Fredoka One', cursive; font-size: 1.5rem; margin-bottom: 15px; color: var(--dark); }

/* Timer Bar */
.timer-container { width: 100%; height: 20px; background: #e2e8f0; border-radius: 20px; border: 3px solid var(--dark); overflow: hidden; margin-bottom: 25px; position: relative; }
.timer-fill { height: 100%; background: var(--secondary); width: 100%; transition: width 0.3s linear, background-color 0.3s; }
.timer-fill.low { background: var(--danger); }
.time-plus { position: absolute; right: 10px; top: -5px; color: var(--secondary); font-weight: 900; font-size: 1.2rem; opacity: 0; }
.time-plus.show { animation: floatUpFade 1s ease-out forwards; }
@keyframes floatUpFade { 0% { opacity: 1; transform: translateY(0); } 100% { opacity: 0; transform: translateY(-20px); } }

/* Spelling Flashcard Layout */
.flashcard {
  display: flex; flex-direction: column; align-items: center; justify-content: center;
  margin-bottom: 30px;
}
.card-emoji {
  font-size: 6rem;
  margin-bottom: 10px;
  filter: drop-shadow(0 8px 8px rgba(0,0,0,0.15));
  animation: bounceEmoji 2s infinite ease-in-out;
}
@keyframes bounceEmoji { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }

.word-display {
  font-family: 'Fredoka One', cursive;
  font-size: 3rem;
  letter-spacing: 8px;
  color: var(--dark);
  text-transform: uppercase;
}
.missing-letter {
  color: var(--primary);
  border-bottom: 4px solid var(--primary);
  display: inline-block;
  min-width: 40px;
  text-align: center;
}

/* Answer Options Grid */
.options-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
.opt-btn {
  font-family: 'Fredoka One', cursive; font-size: 2rem; text-transform: uppercase;
  background: white; border: 4px solid var(--dark); color: var(--dark);
  border-radius: 16px; padding: 15px; cursor: pointer;
  box-shadow: 0 6px 0 var(--dark); transition: all 0.1s;
}
.opt-btn:active { transform: translateY(6px); box-shadow: 0 0 0 var(--dark); }
.opt-btn.correct { background: var(--primary); color: white; border-color: var(--primary); box-shadow: 0 6px 0 #7e22ce; }
.opt-btn.wrong { background: var(--danger); color: white; border-color: var(--danger); box-shadow: 0 6px 0 #e11d48; }

/* Feedback animations */
.feedback-star { position: absolute; font-size: 4rem; opacity: 0; pointer-events: none; z-index: 10; }
.feedback-star.pop { animation: starPop 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards; }
@keyframes starPop { 0% { opacity: 1; transform: scale(0.5) rotate(-20deg); } 50% { transform: scale(1.2) rotate(10deg); } 100% { opacity: 0; transform: scale(1) translateY(-30px); } }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   END SCREEN
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.score-big { font-size: 5rem; margin: 10px 0; color: var(--primary); font-family: 'Fredoka One'; line-height: 1;}
.end-msg { font-size: 1.2rem; font-weight: 800; color: #64748b; margin-bottom: 25px; }
.btn-primary {
  width: 100%; font-family: 'Fredoka One', cursive; font-size: 1.5rem;
  background: var(--primary); color: white; border: 4px solid #7e22ce;
  border-radius: 16px; padding: 15px; cursor: pointer;
  box-shadow: 0 6px 0 #7e22ce; transition: all 0.1s;
}
.btn-primary:active { transform: translateY(6px); box-shadow: 0 0 0 #7e22ce; }

</style>
</head>
<body>

<a href="index.html" class="home-btn">ğŸ  Home</a>

<header>
  <h1>Word Wizard</h1>
  <div class="subtitle">Spelling & Phonics ğŸ–ï¸</div>
</header>

<div id="startScreen" class="screen active">
  <div class="worksheet-card">
    <h2 style="font-family:'Fredoka One'; font-size: 1.8rem; margin-bottom: 20px; color: var(--dark);">Choose Your Mode</h2>
    
    <button class="mode-btn relaxed" onclick="startGame('relaxed')">
      <div class="mode-icon">ğŸŒŸ</div>
      <div class="mode-text">
        <h3>Relaxed Mode</h3>
        <p>Take your time! The timer fully resets for every word.</p>
      </div>
    </button>

    <button class="mode-btn blast" onclick="startGame('blast')">
      <div class="mode-icon">âš¡</div>
      <div class="mode-text">
        <h3>Lightning Mode</h3>
        <p>Survival! Get +5 seconds for every correct spelling.</p>
      </div>
    </button>
  </div>
</div>

<div id="gameScreen" class="screen">
  <div class="worksheet-card">
    <div class="feedback-star" id="fStar">âœ¨</div>
    
    <div class="top-bar">
      <div>Score: <span id="scoreDisplay">0</span></div>
      <div id="modeDisplay" style="color: var(--secondary);">ğŸŒŸ Relaxed</div>
    </div>

    <div class="timer-container">
      <div class="timer-fill" id="timerFill"></div>
      <div class="time-plus" id="timePlus">+5s</div>
    </div>

    <div class="flashcard">
      <div class="card-emoji" id="wordEmoji">ğŸ</div>
      <div class="word-display" id="wordDisplay">A P P <span class="missing-letter">_</span> E</div>
    </div>

    <div class="options-grid" id="optionsContainer">
      </div>
  </div>
</div>

<div id="endScreen" class="screen">
  <div class="worksheet-card">
    <h2 style="font-family:'Fredoka One'; font-size: 2.5rem; color: var(--dark);">Time's Up!</h2>
    <div class="score-big" id="finalScore">0</div>
    <div class="end-msg" id="endMessage">Great spelling!</div>
    <button class="btn-primary" onclick="showStartScreen()">Play Again ğŸ”„</button>
  </div>
</div>

<script>
// --- DICTIONARY ---
const DICTIONARY = [
  { w: "APPLE", e: "ğŸ" }, { w: "CAT", e: "ğŸ±" }, { w: "DOG", e: "ğŸ¶" },
  { w: "BIRD", e: "ğŸ¦" }, { w: "FISH", e: "ğŸŸ" }, { w: "SUN", e: "â˜€ï¸" },
  { w: "MOON", e: "ğŸŒ™" }, { w: "STAR", e: "â­" }, { w: "TREE", e: "ğŸŒ³" },
  { w: "CAR", e: "ğŸš—" }, { w: "TRAIN", e: "ğŸš‚" }, { w: "HOUSE", e: "ğŸ " },
  { w: "BOOK", e: "ğŸ“–" }, { w: "MILK", e: "ğŸ¥›" }, { w: "FROG", e: "ğŸ¸" },
  { w: "BEAR", e: "ğŸ»" }, { w: "LION", e: "ğŸ¦" }, { w: "TIGER", e: "ğŸ¯" },
  { w: "DUCK", e: "ğŸ¦†" }, { w: "PIG", e: "ğŸ·" }, { w: "COW", e: "ğŸ®" },
  { w: "SHOE", e: "ğŸ‘" }, { w: "HAT", e: "ğŸ©" }, { w: "BALL", e: "âš½" },
  { w: "CLOCK", e: "â°" }, { w: "FIRE", e: "ğŸ”¥" }, { w: "WATER", e: "ğŸ’§" },
  { w: "GRASS", e: "ğŸŒ¿" }, { w: "CLOUD", e: "â˜ï¸" }, { w: "RAIN", e: "ğŸŒ§ï¸" }
];

const ALPHABET = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";

// --- GAME STATE ---
let score = 0;
let timeLeft = 0;
let timeTotal = 0;
let timerInterval;
let currentWordObj = null;
let missingChar = "";
let currentMode = 'relaxed'; 

const SECONDS_RELAXED = 15; 
const SECONDS_BLAST_START = 20; 
const BONUS_TIME = 5; 

// DOM Elements
const screens = {
  start: document.getElementById('startScreen'),
  game: document.getElementById('gameScreen'),
  end: document.getElementById('endScreen')
};
const els = {
  emoji: document.getElementById('wordEmoji'),
  word: document.getElementById('wordDisplay'),
  opts: document.getElementById('optionsContainer'),
  score: document.getElementById('scoreDisplay'),
  timer: document.getElementById('timerFill'),
  plus: document.getElementById('timePlus'),
  mode: document.getElementById('modeDisplay'),
  star: document.getElementById('fStar')
};

function switchScreen(screenName) {
  Object.values(screens).forEach(s => s.classList.remove('active'));
  screens[screenName].classList.add('active');
}

function showStartScreen() {
  clearInterval(timerInterval);
  switchScreen('start');
}

function startGame(mode) {
  currentMode = mode;
  score = 0;
  els.score.innerText = score;
  
  if (mode === 'relaxed') {
    els.mode.innerHTML = 'ğŸŒŸ Relaxed';
    els.mode.style.color = 'var(--secondary)';
    timeTotal = SECONDS_RELAXED;
    timeLeft = SECONDS_RELAXED;
  } else {
    els.mode.innerHTML = 'âš¡ Lightning';
    els.mode.style.color = 'var(--warning)';
    timeTotal = SECONDS_BLAST_START;
    timeLeft = SECONDS_BLAST_START;
  }

  updateTimerUI();
  generateQuestion();
  switchScreen('game');

  clearInterval(timerInterval);
  timerInterval = setInterval(countdown, 1000);
}

function countdown() {
  timeLeft--;
  updateTimerUI();
  if (timeLeft <= 0) {
    endGame();
  }
}

function updateTimerUI() {
  let percentage = (timeLeft / timeTotal) * 100;
  if (percentage > 100) percentage = 100; 
  if (percentage < 0) percentage = 0;

  els.timer.style.width = percentage + '%';

  if (timeLeft <= 5) {
    els.timer.classList.add('low');
  } else {
    els.timer.classList.remove('low');
  }
}

function generateQuestion() {
  // Relaxed Mode resets timer every question
  if (currentMode === 'relaxed') {
    timeLeft = SECONDS_RELAXED;
    timeTotal = SECONDS_RELAXED;
    updateTimerUI();
  }

  // Pick random word
  currentWordObj = DICTIONARY[Math.floor(Math.random() * DICTIONARY.length)];
  let wordStr = currentWordObj.w;
  
  // Pick a random letter to hide
  let hideIndex = Math.floor(Math.random() * wordStr.length);
  missingChar = wordStr[hideIndex];

  // Build the display HTML
  let displayHtml = '';
  for (let i = 0; i < wordStr.length; i++) {
    if (i === hideIndex) {
      displayHtml += `<span class="missing-letter">_</span>`;
    } else {
      displayHtml += wordStr[i];
    }
    if(i < wordStr.length - 1) displayHtml += ' '; // Add spaces between letters
  }

  els.emoji.innerText = currentWordObj.e;
  els.word.innerHTML = displayHtml;

  generateOptions(missingChar);
}

function generateOptions(correct) {
  let options = [correct];
  
  while (options.length < 4) {
    let randomChar = ALPHABET[Math.floor(Math.random() * ALPHABET.length)];
    // Make sure we don't pick the correct letter or duplicates
    if (!options.includes(randomChar)) {
      options.push(randomChar);
    }
  }

  // Shuffle options
  options.sort(() => Math.random() - 0.5);

  els.opts.innerHTML = '';
  options.forEach(opt => {
    let btn = document.createElement('button');
    btn.className = 'opt-btn';
    btn.innerText = opt;
    btn.onclick = () => checkAnswer(opt, btn);
    els.opts.appendChild(btn);
  });
}

function checkAnswer(selected, btn) {
  // Disable buttons
  document.querySelectorAll('.opt-btn').forEach(b => b.disabled = true);

  if (selected === missingChar) {
    // CORRECT
    btn.classList.add('correct');
    score++;
    els.score.innerText = score;
    
    // Fill in the blank visually
    document.querySelector('.missing-letter').innerText = missingChar;
    document.querySelector('.missing-letter').style.color = "var(--primary)";
    document.querySelector('.missing-letter').style.borderBottom = "none";

    // Star Animation
    els.star.style.left = btn.offsetLeft + (btn.offsetWidth/2) - 30 + 'px';
    els.star.style.top = btn.offsetTop - 30 + 'px';
    els.star.classList.remove('pop');
    void els.star.offsetWidth; 
    els.star.classList.add('pop');

    // Handle Time Mechanics
    if (currentMode === 'blast') {
      timeLeft += BONUS_TIME;
      if(timeLeft > timeTotal) timeTotal = timeLeft; 
      
      els.plus.classList.remove('show');
      void els.plus.offsetWidth; 
      els.plus.classList.add('show');
      updateTimerUI();
    }

    setTimeout(() => {
      generateQuestion();
    }, 700);

  } else {
    // WRONG
    btn.classList.add('wrong');
    // Find correct button and show it
    document.querySelectorAll('.opt-btn').forEach(b => {
      if (b.innerText === missingChar) {
        b.classList.add('correct');
      }
    });

    // Fill in the blank to show the correct answer
    document.querySelector('.missing-letter').innerText = missingChar;
    document.querySelector('.missing-letter').style.color = "var(--danger)";

    setTimeout(() => {
      generateQuestion();
    }, 1500); // Give kid extra time to look at the correct spelling
  }
}

function endGame() {
  clearInterval(timerInterval);
  document.getElementById('finalScore').innerText = score;
  
  let msg = "Keep Practising! ğŸ‘";
  if (score > 10) msg = "Great Spelling! ğŸŒŸ";
  if (score > 20) msg = "Word Wizard! ğŸª„";
  
  document.getElementById('endMessage').innerText = msg;
  switchScreen('end');
}

// Sparkle cursor effect (kept for fun!)
document.addEventListener('click', e => {
  if(e.target.tagName === 'BUTTON') return; 
  const sparkles = ['âœ¨','ğŸ–ï¸','ğŸª„'];
  const el = document.createElement('div');
  el.textContent = sparkles[Math.floor(Math.random()*sparkles.length)];
  el.style.position = 'fixed';
  el.style.left = (e.clientX - 10) + 'px';
  el.style.top = (e.clientY - 10) + 'px';
  el.style.fontSize = '1.2rem';
  el.style.pointerEvents = 'none';
  el.style.animation = 'sparkle-pop 0.8s ease forwards';
  document.body.appendChild(el);
  setTimeout(() => el.remove(), 800);
});
</script>
</body>
</html>
