<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Biology Lab ğŸ§¬ - Super Worksheets</title>
<link href="https://fonts.googleapis.com/css2?family=Fredoka+One&family=Nunito:wght@600;800;900&display=swap" rel="stylesheet">
<style>
/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   WORKSHEET THEME - BIOLOGY
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
:root {
  --primary: #f43f5e; /* Rose / Heart color */
  --secondary: #10b981; /* Nature Green */
  --danger: #ef4444; 
  --warning: #fbbf24; 
  --blue: #0ea5e9;
  --dark: #1e293b; 
  --paper: #ffffff;
  --grid: #ffe4e6; /* Light pink grid */
}

* { margin:0; padding:0; box-sizing:border-box; }

body {
  font-family: 'Nunito', sans-serif;
  background-color: #fff1f2;
  background-image: radial-gradient(var(--grid) 3px, transparent 3px);
  background-size: 30px 30px; 
  color: var(--dark); min-height: 100vh; display: flex; flex-direction: column; align-items: center; padding: 20px;
}

.home-btn {
  position: absolute; top: 20px; left: 20px; background: white; border: 3px solid var(--primary);
  color: var(--primary); padding: 8px 16px; border-radius: 50px; text-decoration: none;
  font-family: 'Fredoka One', cursive; font-size: 1.1rem; box-shadow: 0 4px 0 var(--primary); z-index: 100;
}
.home-btn:active { transform: translateY(4px); box-shadow: 0 0 0 var(--primary); }

header { text-align: center; margin-top: 40px; margin-bottom: 20px; }
h1 { font-family: 'Fredoka One', cursive; font-size: 3.5rem; color: var(--primary); text-shadow: 2px 2px 0 #fff; line-height: 1; }
.subtitle { font-size: 1.2rem; font-weight: 800; color: #475569; margin-top: 5px; }

.screen { display: none; width: 100%; max-width: 600px; animation: popIn 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
.screen.active { display: block; }
@keyframes popIn { 0% { opacity: 0; transform: scale(0.9) translateY(20px); } 100% { opacity: 1; transform: scale(1) translateY(0); } }

.worksheet-card { background: var(--paper); border: 4px solid var(--dark); border-radius: 24px; padding: 30px; box-shadow: 0 10px 0 rgba(30, 41, 59, 0.1); text-align: center; position: relative; }

/* Category Grid */
.cat-grid { display: grid; grid-template-columns: 1fr; gap: 15px; margin-top: 20px; }
.cat-btn {
  background: white; border: 4px solid var(--dark); border-radius: 16px; padding: 15px 20px;
  cursor: pointer; transition: all 0.1s; display: flex; align-items: center; justify-content: flex-start; gap: 20px;
  box-shadow: 0 6px 0 var(--dark);
}
.cat-btn:active { transform: translateY(6px); box-shadow: 0 0 0 var(--dark); }
.cat-icon { font-size: 3.5rem; filter: drop-shadow(0 4px 4px rgba(0,0,0,0.1)); }
.cat-info { text-align: left; }
.cat-info h3 { font-family: 'Fredoka One', cursive; font-size: 1.5rem; color: var(--dark); margin-bottom: 4px; }
.cat-info p { font-size: 1rem; font-weight: 700; color: #64748b; }

/* Modes */
.mode-btn { width: 100%; display: flex; align-items: center; gap: 15px; background: white; border: 4px solid var(--dark); border-radius: 20px; padding: 15px 20px; margin-bottom: 15px; cursor: pointer; text-align: left; box-shadow: 0 6px 0 var(--dark); }
.mode-btn:active { transform: translateY(6px); box-shadow: 0 0 0 var(--dark); }

/* Learning Area */
.learning-display { background: #f8fafc; border: 3px dashed #cbd5e1; border-radius: 16px; padding: 20px; margin-bottom: 20px; min-height: 250px; display: flex; flex-direction: column; align-items: center; justify-content: center; }
.learn-emoji { font-size: 6rem; filter: drop-shadow(0 5px 5px rgba(0,0,0,0.1)); margin-bottom: 10px; animation: floatLab 3s infinite ease-in-out; }
@keyframes floatLab { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }
.learn-title { font-family: 'Fredoka One', cursive; font-size: 2rem; color: var(--primary); margin-bottom: 10px; }
.learn-desc { font-size: 1.2rem; font-weight: 800; color: var(--dark); line-height: 1.4; }

/* Item Grid */
.item-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; }
.item-btn { font-size: 3rem; background: white; border: 3px solid var(--dark); border-radius: 12px; padding: 10px; cursor: pointer; box-shadow: 0 4px 0 var(--dark); transition: all 0.1s; }
.item-btn:active { transform: translateY(4px); box-shadow: 0 0 0 var(--dark); }
.item-btn.active { border-color: var(--primary); background: #fff1f2; }

/* Test Area */
.test-header { display: flex; justify-content: space-between; font-family: 'Fredoka One'; font-size: 1.3rem; border-bottom: 3px dashed #cbd5e1; padding-bottom: 15px; margin-bottom: 20px; }
.q-row { display: flex; align-items: center; justify-content: space-between; font-size: 1.2rem; font-family: 'Nunito', sans-serif; font-weight: 900; padding: 15px 0; border-bottom: 2px solid #f1f5f9; text-align: left; }
.q-content { display: flex; align-items: center; gap: 10px; width: 65%; line-height: 1.3; }
.q-input-wrap { position: relative; width: 30%; display: flex; flex-direction: column; align-items: center; gap: 5px; }
.q-input { width: 100%; font-family: 'Fredoka One'; font-size: 1.1rem; padding: 8px; border: 3px solid var(--dark); border-radius: 12px; text-align: center; outline: none; background: white; cursor: pointer; }
.q-input:focus { border-color: var(--primary); }

/* Grading Styles */
.q-row.correct .q-input { background: #d1fae5; border-color: #10b981; color: #10b981; }
.q-row.wrong .q-input { background: #fee2e2; border-color: var(--danger); color: var(--danger); }
.correction { font-size: 1rem; color: #10b981; display: none; font-weight: 800; }
.q-row.wrong .correction { display: block; animation: popIn 0.3s; }

.btn-primary { width: 100%; font-family: 'Fredoka One', cursive; font-size: 1.5rem; background: var(--primary); color: white; border: 4px solid #be123c; border-radius: 16px; padding: 15px; cursor: pointer; box-shadow: 0 6px 0 #be123c; margin-top: 20px;}
.btn-primary:active { transform: translateY(6px); box-shadow: 0 0 0 #be123c; }

@media(max-width: 500px) {
  .cat-btn { flex-direction: column; text-align: center; gap: 5px; }
  .cat-info { text-align: center; }
  .q-row { flex-direction: column; align-items: flex-start; gap: 10px; }
  .q-content { width: 100%; }
  .q-input-wrap { width: 100%; }
}
</style>
</head>
<body>

<a href="index.html" class="home-btn">ğŸ  Home</a>

<header>
  <h1>Biology Lab</h1>
  <div class="subtitle">Life & Nature ğŸ§¬</div>
</header>

<div id="categoryScreen" class="screen active">
  <div class="worksheet-card">
    <h2 style="font-family:'Fredoka One'; font-size: 1.8rem; color: var(--dark);">What shall we study?</h2>
    <div class="cat-grid">
      <button class="cat-btn" style="border-color: var(--primary);" onclick="selectTopic('human')">
        <span class="cat-icon">ğŸ«€</span>
        <div class="cat-info">
          <h3 style="color: var(--primary);">Human Body</h3>
          <p>Organs, bones, and how we work!</p>
        </div>
      </button>

      <button class="cat-btn" style="border-color: var(--secondary);" onclick="selectTopic('animals')">
        <span class="cat-icon">ğŸ†</span>
        <div class="cat-info">
          <h3 style="color: var(--secondary);">Animal Superpowers</h3>
          <p>The fastest, biggest, and coolest animals!</p>
        </div>
      </button>
    </div>
  </div>
</div>

<div id="modeScreen" class="screen">
  <div class="worksheet-card">
    <button style="background:none; border:none; color:#64748b; font-weight:bold; cursor:pointer; margin-bottom:15px; text-decoration:underline;" onclick="switchScreen('categoryScreen')">ğŸ”™ Back to Topics</button>
    <h2 style="font-family:'Fredoka One'; font-size: 1.8rem; margin-bottom: 20px; color: var(--dark);">Choose Your Mode</h2>
    
    <button class="mode-btn" style="border-color: var(--primary); box-shadow: 0 6px 0 var(--primary);" onclick="startMode('learn')">
      <div class="mode-icon">ğŸ“–</div>
      <div>
        <h3 style="font-family:'Fredoka One'; font-size: 1.4rem; color: var(--dark);">Learn Mode</h3>
        <p style="font-weight: 600; color: #64748b;">Tap pictures to read cool facts!</p>
      </div>
    </button>

    <button class="mode-btn" style="border-color: var(--blue); box-shadow: 0 6px 0 var(--blue);" onclick="startMode('test')">
      <div class="mode-icon">ğŸ“</div>
      <div>
        <h3 style="font-family:'Fredoka One'; font-size: 1.4rem; color: var(--dark);">Test Mode</h3>
        <p style="font-weight: 600; color: #64748b;">10 Questions. Let's see what you learned!</p>
      </div>
    </button>
  </div>
</div>

<div id="learnScreen" class="screen">
  <div class="worksheet-card">
    <button style="background:none; border:none; color:#64748b; font-weight:bold; cursor:pointer; margin-bottom:15px; text-decoration:underline;" onclick="switchScreen('modeScreen')">ğŸ”™ Back to Menu</button>
    
    <div class="learning-display" id="learnDisplay">
      <div class="learn-emoji">ğŸ‘†</div>
      <div class="learn-title">Tap an icon below!</div>
      <div class="learn-desc">Let's learn some amazing Biology facts.</div>
    </div>

    <div class="item-grid" id="learnGrid">
      </div>
  </div>
</div>

<div id="testScreen" class="screen">
  <div class="worksheet-card" style="padding: 20px;">
    <button style="background:none; border:none; color:#64748b; font-weight:bold; cursor:pointer; margin-bottom:15px; text-decoration:underline;" onclick="switchScreen('modeScreen')">ğŸ”™ Quit Test</button>
    
    <div class="test-header">
      <span id="testTitle">Biology Test</span>
      <span>Name: Vedh</span>
    </div>
    
    <div id="testQuestionsContainer"></div>

    <button class="btn-primary" id="submitTestBtn" style="margin-top: 30px;" onclick="gradeTest()">Submit Test ğŸ“‹</button>

    <div id="testResultArea" style="display:none; margin-top:30px;">
      <h2 style="font-family:'Fredoka One'; font-size: 2.5rem;">Score: <span id="testScoreDisplay" style="color:var(--primary);">0/10</span></h2>
      <p id="testResultMsg" style="font-weight: 800; font-size: 1.2rem; color: #64748b; margin-bottom: 20px;">Review your answers above!</p>
      <button class="btn-primary" onclick="switchScreen('categoryScreen')">Study Another Topic ğŸ§¬</button>
    </div>
  </div>
</div>

<script src="sounds.js"></script>

<script>
// --- BIOLOGY DATABASE ENCYCLOPEDIA & TESTS ---
const BIO_DATA = {
  human: [
    { name: "Heart", emoji: "ğŸ«€", desc: "The heart is a strong muscle that pumps blood all around your body! It beats about 100,000 times a day.", q: "Which organ pumps blood around your body?", opts: ["Heart", "Brain", "Lungs", "Stomach"] },
    { name: "Brain", emoji: "ğŸ§ ", desc: "The control center of your body! It helps you think, learn, feel, and controls everything you do.", q: "What is the control center that does your thinking?", opts: ["Brain", "Heart", "Bones", "Skin"] },
    { name: "Lungs", emoji: "ğŸ«", desc: "Your lungs help you breathe. They take in fresh oxygen from the air and push out the used air.", q: "What do you use to breathe in air?", opts: ["Lungs", "Stomach", "Bones", "Heart"] },
    { name: "Skeleton", emoji: "ğŸ¦´", desc: "Bones give your body its shape and protect your soft organs. Without them, you would be a wobbly puddle!", q: "What hard parts give your body its shape and structure?", opts: ["Skeleton / Bones", "Muscles", "Skin", "Hair"] },
    { name: "Stomach", emoji: "ğŸ²", desc: "After you chew and swallow, food goes here! The stomach mashes it up so your body can use it for energy.", q: "Where does your food go to be digested?", opts: ["Stomach", "Lungs", "Brain", "Heart"] },
    { name: "Skin", emoji: "âœ‹", desc: "The largest organ! It covers your whole body, keeps your insides safe, and helps you feel hot, cold, and soft things.", q: "What covers your entire body and protects it?", opts: ["Skin", "Hair", "Bones", "Muscles"] }
  ],
  animals: [
    { name: "Cheetah", emoji: "ğŸ†", desc: "The fastest land animal on Earth! It can sprint as fast as a car on the highway to catch its dinner.", q: "What is the fastest land animal?", opts: ["Cheetah", "Lion", "Horse", "Dog"] },
    { name: "Giraffe", emoji: "ğŸ¦’", desc: "It has a super long neck and a purple tongue! It uses its height to eat leaves from the tops of tall trees.", q: "Which animal has a very long neck to eat from tall trees?", opts: ["Giraffe", "Elephant", "Zebra", "Hippo"] },
    { name: "Blue Whale", emoji: "ğŸ‹", desc: "The largest animal to ever live! It is even bigger than the biggest dinosaurs and lives in the ocean.", q: "Which ocean animal is the largest living creature on Earth?", opts: ["Blue Whale", "Great White Shark", "Dolphin", "Octopus"] },
    { name: "Kangaroo", emoji: "ğŸ¦˜", desc: "A marsupial from Australia. It has powerful back legs for jumping and carries its baby (a joey) in a pouch!", q: "Which animal carries its baby in a pouch?", opts: ["Kangaroo", "Koala", "Monkey", "Bear"] },
    { name: "Chameleon", emoji: "ğŸ¦", desc: "A special lizard that can change its skin color to hide from danger or show how it feels.", q: "Which animal can change its color to hide?", opts: ["Chameleon", "Snake", "Frog", "Turtle"] },
    { name: "Ostrich", emoji: "ğŸ¦…", desc: "The biggest bird in the world. It cannot fly, but it can run super fast on its long, strong legs.", q: "Which bird is the largest but cannot fly?", opts: ["Ostrich", "Penguin", "Eagle", "Parrot"] }
  ]
};

let currentTopic = '';
let testQuestionsData = []; 

const screens = {
  categoryScreen: document.getElementById('categoryScreen'),
  modeScreen: document.getElementById('modeScreen'),
  learnScreen: document.getElementById('learnScreen'),
  testScreen: document.getElementById('testScreen')
};

function switchScreen(screenName) {
  Object.values(screens).forEach(s => s.classList.remove('active'));
  screens[screenName].classList.add('active');
}

function selectTopic(topic) {
  currentTopic = topic;
  switchScreen('modeScreen');
  if(typeof playSound === 'function') playSound('click');
}

function startMode(mode) {
  if (mode === 'learn') {
    setupLearnMode();
    switchScreen('learnScreen');
  } else if (mode === 'test') {
    setupTestMode();
    switchScreen('testScreen');
  }
  if(typeof playSound === 'function') playSound('click');
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// LEARN MODE (ENCYCLOPEDIA)
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function setupLearnMode() {
  const data = BIO_DATA[currentTopic];
  const grid = document.getElementById('learnGrid');
  grid.innerHTML = '';
  
  // Reset Display
  document.getElementById('learnDisplay').innerHTML = `
    <div class="learn-emoji">ğŸ‘†</div>
    <div class="learn-title">Tap an icon below!</div>
    <div class="learn-desc">Let's learn some amazing Biology facts.</div>
  `;

  data.forEach((item, index) => {
    let btn = document.createElement('button');
    btn.className = 'item-btn';
    btn.innerText = item.emoji;
    btn.onclick = () => showFact(item, btn);
    grid.appendChild(btn);
  });
}

function showFact(item, btnElement) {
  if(typeof playSound === 'function') playSound('click');
  
  // Remove active from all buttons, add to clicked
  document.querySelectorAll('.item-btn').forEach(b => b.classList.remove('active'));
  btnElement.classList.add('active');

  // Update Top Display
  document.getElementById('learnDisplay').innerHTML = `
    <div class="learn-emoji">${item.emoji}</div>
    <div class="learn-title">${item.name}</div>
    <div class="learn-desc">${item.desc}</div>
  `;
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// TEST MODE
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function setupTestMode() {
  testQuestionsData = [];
  document.getElementById('submitTestBtn').style.display = 'block';
  document.getElementById('testResultArea').style.display = 'none';
  
  let titleMap = { 'human': 'Human Body', 'animals': 'Animal Superpowers' };
  document.getElementById('testTitle').innerText = titleMap[currentTopic] + " Test";
  
  const container = document.getElementById('testQuestionsContainer');
  container.innerHTML = '';

  // Get data and duplicate/shuffle to get exactly 10 questions
  let sourceData = [...BIO_DATA[currentTopic], ...BIO_DATA[currentTopic]].sort(() => Math.random() - 0.5).slice(0, 10);

  sourceData.forEach((item, i) => {
    let ans = item.opts[0]; // The correct answer is always first in the array in our DB
    testQuestionsData.push(ans);
    
    // Shuffle options for the dropdown
    let shuffledOpts = [...item.opts].sort(() => Math.random() - 0.5);
    let optsHTML = shuffledOpts.map(o => `<option value="${o}">${o}</option>`).join('');

    let row = document.createElement('div');
    row.className = 'q-row';
    row.id = `qrow-${i}`;
    row.innerHTML = `
      <div class="q-content">
        <span style="font-size:1.2rem; color:#94a3b8; margin-right:5px;">${i + 1}.</span>
        ${item.q}
      </div>
      <div class="q-input-wrap">
        <select class="q-input" id="t-input-${i}">
          <option value="">Select...</option>
          ${optsHTML}
        </select>
        <span class="correction" id="corr-${i}">âœ“ ${ans}</span>
      </div>
    `;
    container.appendChild(row);
  });
}

function gradeTest() {
  let testScore = 0;
  
  testQuestionsData.forEach((ans, i) => {
    let inputEl = document.getElementById(`t-input-${i}`);
    let rowEl = document.getElementById(`qrow-${i}`);
    let userVal = inputEl.value;

    inputEl.disabled = true;

    if (userVal === ans) {
      rowEl.classList.add('correct');
      testScore++;
    } else {
      rowEl.classList.add('wrong');
    }
  });

  document.getElementById('submitTestBtn').style.display = 'none';
  document.getElementById('testResultArea').style.display = 'block';
  document.getElementById('testScoreDisplay').innerText = `${testScore}/10`;
  
  if (testScore === 10) {
    if(typeof playSound === 'function') playSound('win');
    document.getElementById('testResultMsg').innerText = "Perfect Score! Amazing Biologist! ğŸŒŸ";
  } else if (testScore >= 7) {
    if(typeof playSound === 'function') playSound('correct');
    document.getElementById('testResultMsg').innerText = "Great job! Review your mistakes. ğŸ‘";
  } else {
    if(typeof playSound === 'function') playSound('wrong');
    document.getElementById('testResultMsg').innerText = "Keep studying! Review your answers. ğŸ’ª";
  }

  // Add XP
  let currentXP = parseInt(localStorage.getItem('vedhTotalXP')) || 0;
  localStorage.setItem('vedhTotalXP', currentXP + (testScore * 2)); 

  window.scrollTo(0, 0);
}
</script>
</body>
</html>
