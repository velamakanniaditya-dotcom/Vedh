<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Memory Master ğŸ§  - Super Worksheets</title>
<link href="https://fonts.googleapis.com/css2?family=Fredoka+One&family=Nunito:wght@600;800;900&display=swap" rel="stylesheet">
<style>
/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   WORKSHEET THEME - MEMORY & LOGIC
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
:root {
  --primary: #f97316; /* Vibrant Orange */
  --secondary: #3b82f6; /* Bright Blue */
  --danger: #ef4444; 
  --green: #10b981;
  --purple: #a855f7;
  --dark: #1e293b; 
  --paper: #ffffff;
  --grid: #ffedd5; /* Light orange dots */
}

* { margin:0; padding:0; box-sizing:border-box; }

body {
  font-family: 'Nunito', sans-serif;
  background-color: #fff7ed;
  background-image: radial-gradient(var(--grid) 3px, transparent 3px);
  background-size: 30px 30px; 
  color: var(--dark); min-height: 100vh; display: flex; flex-direction: column; align-items: center; padding: 20px;
  user-select: none; /* Prevent text selection while tapping fast */
}

.home-btn {
  position: absolute; top: 20px; left: 20px; background: white; border: 3px solid var(--primary);
  color: var(--primary); padding: 8px 16px; border-radius: 50px; text-decoration: none;
  font-family: 'Fredoka One', cursive; font-size: 1.1rem; box-shadow: 0 4px 0 var(--primary); z-index: 100;
}
.home-btn:active { transform: translateY(4px); box-shadow: 0 0 0 var(--primary); }

header { text-align: center; margin-top: 40px; margin-bottom: 20px; }
h1 { font-family: 'Fredoka One', cursive; font-size: 3.5rem; color: var(--primary); text-shadow: 2px 2px 0 #fff; line-height: 1; }
.subtitle { font-size: 1.2rem; font-weight: 800; color: #475569; margin-top: 5px; }

.screen { display: none; width: 100%; max-width: 600px; animation: popIn 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
.screen.active { display: block; }
@keyframes popIn { 0% { opacity: 0; transform: scale(0.9) translateY(20px); } 100% { opacity: 1; transform: scale(1) translateY(0); } }

.worksheet-card { background: var(--paper); border: 4px solid var(--dark); border-radius: 24px; padding: 25px; box-shadow: 0 10px 0 rgba(30, 41, 59, 0.1); text-align: center; position: relative; }

/* Category Grid */
.cat-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 20px; }
.cat-btn {
  background: white; border: 4px solid var(--dark); border-radius: 16px; padding: 20px 10px;
  cursor: pointer; font-family: 'Fredoka One', cursive; font-size: 1.2rem; color: var(--dark);
  box-shadow: 0 6px 0 var(--dark); transition: all 0.1s; display: flex; flex-direction: column; align-items: center; gap: 8px;
}
.cat-btn:active { transform: translateY(6px); box-shadow: 0 0 0 var(--dark); }
.cat-icon { font-size: 3rem; filter: drop-shadow(0 4px 4px rgba(0,0,0,0.1)); }

/* Game Area */
.top-bar { display: flex; justify-content: space-between; font-family: 'Fredoka One', cursive; font-size: 1.5rem; margin-bottom: 20px; color: var(--dark); background: #f1f5f9; padding: 10px 20px; border-radius: 16px; border: 3px dashed #cbd5e1; }
.moves-counter { color: var(--primary); }

/* Memory Board Layout */
.memory-board {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 12px;
  perspective: 1000px;
  margin-bottom: 20px;
}

/* 3D Card Flipping Styles */
.mem-card {
  aspect-ratio: 1 / 1.1;
  position: relative;
  cursor: pointer;
  transform-style: preserve-3d;
  transition: transform 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}
.mem-card.flipped { transform: rotateY(180deg); }

.card-face {
  position: absolute;
  width: 100%; height: 100%;
  backface-visibility: hidden;
  border-radius: 16px;
  border: 4px solid var(--dark);
  display: flex; align-items: center; justify-content: center;
  font-family: 'Fredoka One', cursive;
  box-shadow: 0 4px 0 rgba(0,0,0,0.1);
  padding: 5px;
}

.card-back {
  background: repeating-linear-gradient(45deg, var(--primary), var(--primary) 10px, #ea580c 10px, #ea580c 20px);
  color: white; font-size: 2.5rem;
}
.card-front {
  background: white;
  transform: rotateY(180deg);
  font-size: 2rem; color: var(--dark);
  text-align: center; line-height: 1.2;
}

/* Specific text scaling for longer words */
.text-lg { font-size: 2.5rem; }
.text-md { font-size: 1.4rem; }
.text-sm { font-size: 1.1rem; }

.btn-primary { width: 100%; font-family: 'Fredoka One', cursive; font-size: 1.5rem; background: var(--secondary); color: white; border: 4px solid #1d4ed8; border-radius: 16px; padding: 15px; cursor: pointer; box-shadow: 0 6px 0 #1d4ed8; }
.btn-primary:active { transform: translateY(6px); box-shadow: 0 0 0 #1d4ed8; }

@media(max-width: 500px) {
  .cat-grid { grid-template-columns: 1fr; }
  .memory-board { grid-template-columns: repeat(3, 1fr); gap: 10px; }
  .text-md { font-size: 1.1rem; }
  .text-sm { font-size: 0.9rem; }
}
@media(min-width: 600px) {
  .memory-board { grid-template-columns: repeat(4, 1fr); gap: 15px; } /* Wider screens get 4 columns */
}
</style>
</head>
<body>

<a href="index.html" class="home-btn">ğŸ  Home</a>

<header>
  <h1>Memory Master</h1>
  <div class="subtitle">Focus & Logic Lab ğŸ§ </div>
</header>

<div id="categoryScreen" class="screen active">
  <div class="worksheet-card">
    <h2 style="font-family:'Fredoka One'; font-size: 1.8rem; color: var(--dark);">What are we matching today?</h2>
    <div class="cat-grid">
      <button class="cat-btn" style="border-color: var(--secondary); color: var(--secondary);" onclick="startGame('emoji')">
        <span class="cat-icon">ğŸ¶</span> Classic Emojis
      </button>
      <button class="cat-btn" style="border-color: var(--green); color: var(--green);" onclick="startGame('math')">
        <span class="cat-icon">â•</span> Match the Math
      </button>
      <button class="cat-btn" style="border-color: var(--purple); color: var(--purple);" onclick="startGame('capitals')">
        <span class="cat-icon">ğŸŒ</span> World Capitals
      </button>
      <button class="cat-btn" style="border-color: var(--danger); color: var(--danger);" onclick="startGame('phonics')">
        <span class="cat-icon">ğŸ”¤</span> Phonics & Words
      </button>
    </div>
  </div>
</div>

<div id="gameScreen" class="screen">
  <div class="worksheet-card">
    <div class="top-bar">
      <div>Pairs: <span id="pairsFound">0</span>/6</div>
      <div class="moves-counter">Moves: <span id="movesCount">0</span></div>
    </div>

    <div class="memory-board" id="memoryBoard"></div>

    <button style="background:none; border:none; color:#64748b; font-family:'Fredoka One'; font-size:1.2rem; cursor:pointer; margin-top:10px; text-decoration:underline;" onclick="switchScreen('categoryScreen')">ğŸ”™ Quit to Menu</button>
  </div>
</div>

<div id="endScreen" class="screen">
  <div class="worksheet-card">
    <h2 style="font-family:'Fredoka One'; font-size: 2.5rem; color: var(--dark);">Brain Master!</h2>
    <div style="font-size: 5rem; margin: 10px 0; animation: popIn 0.5s ease;">ğŸ†</div>
    <div style="font-size: 1.4rem; font-weight: 800; color: var(--dark); margin-bottom: 5px;">You finished in <span id="finalMoves" style="color:var(--primary);">0</span> moves!</div>
    <div style="font-size: 1.1rem; font-weight: 800; color: #64748b; margin-bottom: 25px;">You earned +20 XP!</div>
    <button class="btn-primary" onclick="switchScreen('categoryScreen')">Play Again ğŸ”„</button>
  </div>
</div>

<script>
// --- DATABASES ---
// We need exactly 6 pairs per game to make a 12-card grid.

const DATASETS = {
  emoji: [
    { id: 1, valA: "ğŸš€", valB: "ğŸš€", style: "text-lg" },
    { id: 2, valA: "ğŸ•", valB: "ğŸ•", style: "text-lg" },
    { id: 3, valA: "ğŸ¦–", valB: "ğŸ¦–", style: "text-lg" },
    { id: 4, valA: "âš½", valB: "âš½", style: "text-lg" },
    { id: 5, valA: "ğŸ¦", valB: "ğŸ¦", style: "text-lg" },
    { id: 6, valA: "ğŸ¸", valB: "ğŸ¸", style: "text-lg" }
  ],
  math: [
    { id: 1, valA: "5 + 4", valB: "9", style: "text-md" },
    { id: 2, valA: "10 - 3", valB: "7", style: "text-md" },
    { id: 3, valA: "6 + 6", valB: "12", style: "text-md" },
    { id: 4, valA: "2 Ã— 5", valB: "10", style: "text-md" },
    { id: 5, valA: "12 Ã· 3", valB: "4", style: "text-md" },
    { id: 6, valA: "8 + 3", valB: "11", style: "text-md" }
  ],
  capitals: [
    { id: 1, valA: "France ğŸ‡«ğŸ‡·", valB: "Paris", style: "text-sm" },
    { id: 2, valA: "Japan ğŸ‡¯ğŸ‡µ", valB: "Tokyo", style: "text-sm" },
    { id: 3, valA: "Italy ğŸ‡®ğŸ‡¹", valB: "Rome", style: "text-sm" },
    { id: 4, valA: "UK ğŸ‡¬ğŸ‡§", valB: "London", style: "text-sm" },
    { id: 5, valA: "USA ğŸ‡ºğŸ‡¸", valB: "Washington", style: "text-sm" },
    { id: 6, valA: "India ğŸ‡®ğŸ‡³", valB: "New Delhi", style: "text-sm" }
  ],
  phonics: [
    { id: 1, valA: "A", valB: "ğŸ Apple", style: "text-md" },
    { id: 2, valA: "B", valB: "ğŸ» Bear", style: "text-md" },
    { id: 3, valA: "C", valB: "ğŸ± Cat", style: "text-md" },
    { id: 4, valA: "D", valB: "ğŸ¶ Dog", style: "text-md" },
    { id: 5, valA: "E", valB: "ğŸ˜ Elephant", style: "text-sm" },
    { id: 6, valA: "F", valB: "ğŸ¸ Frog", style: "text-md" }
  ]
};

// --- GAME STATE ---
const screens = {
  categoryScreen: document.getElementById('categoryScreen'),
  gameScreen: document.getElementById('gameScreen'),
  endScreen: document.getElementById('endScreen')
};
const board = document.getElementById('memoryBoard');

let hasFlippedCard = false;
let lockBoard = false;
let firstCard, secondCard;
let moves = 0;
let pairsFound = 0;

function switchScreen(screenName) {
  Object.values(screens).forEach(s => s.classList.remove('active'));
  screens[screenName].classList.add('active');
}

function startGame(category) {
  // Reset Variables
  moves = 0;
  pairsFound = 0;
  hasFlippedCard = false;
  lockBoard = false;
  firstCard = null;
  secondCard = null;
  
  document.getElementById('movesCount').innerText = moves;
  document.getElementById('pairsFound').innerText = pairsFound;
  board.innerHTML = '';

  // Prepare Deck
  let pairsData = DATASETS[category];
  let deck = [];
  
  // Split pairs into individual cards
  pairsData.forEach(pair => {
    deck.push({ id: pair.id, val: pair.valA, style: pair.style });
    deck.push({ id: pair.id, val: pair.valB, style: pair.style });
  });

  // Shuffle Deck
  deck.sort(() => Math.random() - 0.5);

  // Render Deck
  deck.forEach(cardData => {
    const cardEl = document.createElement('div');
    cardEl.classList.add('mem-card');
    cardEl.dataset.id = cardData.id; // The matching identifier
    
    cardEl.innerHTML = `
      <div class="card-face card-back">?</div>
      <div class="card-face card-front ${cardData.style}">${cardData.val}</div>
    `;
    
    cardEl.addEventListener('click', flipCard);
    board.appendChild(cardEl);
  });

  switchScreen('gameScreen');
}

function flipCard() {
  if (lockBoard) return;
  if (this === firstCard) return; // Prevent double clicking same card

  this.classList.add('flipped');

  if (!hasFlippedCard) {
    // First click
    hasFlippedCard = true;
    firstCard = this;
    return;
  }

  // Second click
  secondCard = this;
  moves++;
  document.getElementById('movesCount').innerText = moves;
  
  checkForMatch();
}

function checkForMatch() {
  let isMatch = firstCard.dataset.id === secondCard.dataset.id;

  if (isMatch) {
    disableCards();
  } else {
    unflipCards();
  }
}

function disableCards() {
  // Matched!
  firstCard.removeEventListener('click', flipCard);
  secondCard.removeEventListener('click', flipCard);
  
  // Visual feedback (optional green glow)
  firstCard.querySelector('.card-front').style.borderColor = "var(--green)";
  secondCard.querySelector('.card-front').style.borderColor = "var(--green)";

  pairsFound++;
  document.getElementById('pairsFound').innerText = pairsFound;

  resetBoard();

  if (pairsFound === 6) {
    setTimeout(endGame, 800);
  }
}

function unflipCards() {
  lockBoard = true;
  // Not a match, wait a second then flip back
  setTimeout(() => {
    firstCard.classList.remove('flipped');
    secondCard.classList.remove('flipped');
    resetBoard();
  }, 1200);
}

function resetBoard() {
  [hasFlippedCard, lockBoard] = [false, false];
  [firstCard, secondCard] = [null, null];
}

function endGame() {
  document.getElementById('finalMoves').innerText = moves;
  
  // --- XP SYSTEM INTEGRATION ---
  let currentXP = parseInt(localStorage.getItem('vedhTotalXP')) || 0;
  localStorage.setItem('vedhTotalXP', currentXP + 20); // +20 XP for beating memory master
  
  switchScreen('endScreen');
}
</script>
</body>
</html>
